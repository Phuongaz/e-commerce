import{r as a,A as N,S as C,u as S,j as e,e as L,f as k,h as A,L as P,i as U,y as i}from"./index-CyFUtVx2.js";const E=()=>{const{isAuthenticated:u,setIsAuthenticated:f}=a.useContext(N),[s,h]=a.useState("Login"),{navigate:c,backendUrl:x}=a.useContext(C),[d,b]=a.useState(""),[r,v]=a.useState(""),[l,y]=a.useState(""),[g,p]=a.useState(!1),m=S(),w=async t=>{t.preventDefault(),p(!0);try{const o=s==="Sign Up"?"/register":"/login",j=s==="Sign Up"?{name:d,email:r,password:l}:{email:r,password:l},n=await U.post(`${x}/api/auth${o}`,j,{withCredentials:!0});n.data.success?(i.success(n.data.message,{position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1}),f(!0)):i.error(n.data.message,{position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"})}catch(o){i.error("Something went wrong. Please try again. "+o,{position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"})}finally{p(!1)}};return a.useEffect(()=>{var t;if(u){const o=((t=m.state)==null?void 0:t.from)||"/";setTimeout(()=>{c(o)},1200)}},[c,m.state,u]),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl p-10 mt-10 w-full max-w-lg",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 mb-10",children:s==="Login"?"Welcome Back!":"Create an Account"}),e.jsxs("form",{onSubmit:w,className:"space-y-5",children:[s==="Sign Up"&&e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute top-4 left-3 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Full Name",value:d,onChange:t=>b(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-400 shadow-md",required:!0,autoComplete:"true"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute top-4 left-3 text-gray-500"}),e.jsx("input",{type:"email",placeholder:"Email Address",value:r,onChange:t=>v(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-400 shadow-md",required:!0,autoComplete:"true"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute top-4 left-3 text-gray-500"}),e.jsx("input",{type:"password",placeholder:"Password",value:l,onChange:t=>y(t.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-400 shadow-md",required:!0,autoComplete:"true"})]}),s==="Login"&&e.jsx("div",{className:"text-left",children:e.jsx(P,{to:"/forgot-password",className:"text-blue-600 hover:underline",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",className:`w-full bg-blue-700 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold text-lg transition duration-300 ${g?"opacity-50 cursor-not-allowed":"hover:bg-blue-800"}`,disabled:g,children:s==="Login"?"Sign In":"Sign Up"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-gray-700",children:[s==="Login"?"New here? ":"Already have an account? ",e.jsx("span",{className:"text-blue-600 font-semibold cursor-pointer hover:underline",onClick:()=>h(s==="Login"?"Sign Up":"Login"),children:s==="Login"?"Create Account":"Login"})]})})]})})};export{E as default};
